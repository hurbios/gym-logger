<script>
  function onDeleteButtonClick(id) {
    if (id) {
      if (confirm("Are you sure you want to delete the exercise?")) {
        const xhr = new XMLHttpRequest()
        xhr.open("DELETE", "/delete_exercise/" + id.toString())
        xhr.onload = function () {
          if (xhr.status === 204 || xhr.status === 200) {
            location.reload()
          }
        }
        xhr.onerror = function() {
          alert("Exercise deletion failed.")
        }
        xhr.send()
      }
    }
  }
</script>

<h1>{{ program_name }}</h1>
<i>Here you can edit your workout program.</i>
<p></p>
<table>
  <tr>
    <th>Exercise name</th>
    <th>Reps</th>
    <th>Sets</th>
    <th>Edit / Delete</th>
  </tr>
  {% for exercise in exercises %}
  <tr key="{{ exercise.id }}">
    <td>{{ exercise.name }}</td>
    <td>{{ exercise.sets }}</td>
    <td>{{ exercise.reps }}</td>
    <td><button onclick="onDeleteButtonClick({{ exercise.id }})">Delete</button></td>
  </tr>
  {% endfor %}
</table>

<form action="/add-exercise" method="POST">
  <h3>Add new exercise</h3>
  <input type="text" name="exercise_name" placeholder="exercise name">
  <input type="number" name="exercise_sets" placeholder="number of sets">
  <input type="number" name="exercise_reps" placeholder="number of reps">
  <input type="number" name="program_id" value="{{ program_id }}" hidden>
  <button type="send">Add</button>
</form>